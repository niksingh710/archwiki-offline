<center>

[![made-with-bash](https://img.shields.io/badge/-Made%20with%20Bash-1f425f.svg?logo=image%2Fpng%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw%2FeHBhY2tldCBiZWdpbj0i77u%2FIiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8%2BIDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTExIDc5LjE1ODMyNSwgMjAxNS8wOS8xMC0wMToxMDoyMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkE3MDg2QTAyQUZCMzExRTVBMkQxRDMzMkJDMUQ4RDk3IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkE3MDg2QTAzQUZCMzExRTVBMkQxRDMzMkJDMUQ4RDk3Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QTcwODZBMDBBRkIzMTFFNUEyRDFEMzMyQkMxRDhEOTciIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QTcwODZBMDFBRkIzMTFFNUEyRDFEMzMyQkMxRDhEOTciLz4gPC9yZGY6RGVzY3JpcHRpb24%2BIDwvcmRmOlJERj4gPC94OnhtcG1ldGE%2BIDw%2FeHBhY2tldCBlbmQ9InIiPz6lm45hAAADkklEQVR42qyVa0yTVxzGn7d9Wy03MS2ii8s%2BeokYNQSVhCzOjXZOFNF4jx%2BMRmPUMEUEqVG36jo2thizLSQSMd4N8ZoQ8RKjJtooaCpK6ZoCtRXKpRempbTv5ey83bhkAUphz8fznvP8znn%2B%2F3NeEEJgNBoRRSmz0ub%2FfuxEacBg%2FDmYtiCjgo5NG2mBXq%2BH5I1ogMRk9Zbd%2BQU2e1ML6VPLOyf5tvBQ8yT1lG10imxsABm7SLs898GTpyYynEzP60hO3trHDKvMigUwdeaceacqzp7nOI4n0SSIIjl36ao4Z356OV07fSQAk6xJ3XGg%2BLCr1d1OYlVHp4eUHPnerU79ZA%2F1kuv1JQMAg%2BE4O2P23EumF3VkvHprsZKMzKwbRUXFEyTvSIEmTVbrysp%2BWr8wfQHGK6WChVa3bKUmdWou%2BjpArdGkzZ41c1zG%2Fu5uGH4swzd561F%2BuhIT4%2BLnSuPsv9%2BJKIpjNr9dXYOyk7%2FBZrcjIT4eCnoKgedJP4BEqhG77E3NKP31FO7cfQA5K0dSYuLgz2TwCWJSOBzG6crzKK%2BohNfni%2Bx6OMUMMNe%2Fgf7ocbw0v0acKg6J8Ql0q%2BT%2FAXR5PNi5dz9c71upuQqCKFAD%2BYhrZLEAmpodaHO3Qy6TI3NhBpbrshGtOWKOSMYwYGQM8nJzoFJNxP2HjyIQho4PewK6hBktoDcUwtIln4PjOWzflQ%2Be5yl0yCCYgYikTclGlxadio%2BBQCSiW1UXoVGrKYwH4RgMrjU1HAB4vR6LzWYfFUCKxfS8Ftk5qxHoCUQAUkRJaSEokkV6Y%2F%2BJUOC4hn6A39NVXVBYeNP8piH6HeA4fPbpdBQV5KOx0QaL1YppX3Jgk0TwH2Vg6S3u%2BdB91%2B%2FpuNYPYFl5uP5V7ZqvsrX7jxqMXR6ff3gCQSTzFI0a1TX3wIs8ul%2Bq4HuWAAiM39vhOuR1O1fQ2gT%2F26Z8Z5vrl2OHi9OXZn995nLV9aFfS6UC9JeJPfuK0NBohWpCHMSAAsFe74WWP%2BvT25wtP9Bpob6uGqqyDnOtaeumjRu%2ByFu36VntK%2FPA5umTJeUtPWZSU9BCgud661odVp3DZtkc7AnYR33RRC708PrVi1larW7XwZIjLnd7R6SgSqWSNjU1B3F72pz5TZbXmX5vV81Yb7Lg7XT%2FUXriu8XLVqw6c6XqWnBKiiYU%2BMt3wWF7u7i91XlSEITwSAZ%2FCzAAHsJVbwXYFFEAAAAASUVORK5CYII%3D)](https://www.gnu.org/software/bash/)

</center>

# ArchWiki Offline Access Script

**ArchWiki Offline Access Script** is a powerful tool to fetch and search the ArchWiki documentation offline right from your terminal. It relies on the `arch-wiki-docs` package to provide you with a seamless experience of browsing and troubleshooting Arch Linux related topics.

## Features

- **Offline Access**: Browse ArchWiki documentation without requiring an active internet connection.

- **Flexible Display Modes**: Choose between `rofi`, `dmenu`, or `fzf` for listing and selecting ArchWiki topics.

- **Customizable Opening Method**: Open links using `xdg-open`, `firefox`, `chromium`, `w3m`, or your preferred application.
Absolutely, here's the revised installation section with the "manual" method included:

## Installation

### Manual Installation
1. Install the arch-wiki-docs package using your package manager:
  ```bash
  yay -S arch-wiki-docs
  ```

2. Clone this repository:

    ```bash
    git clone https://github.com/niksingh710/archwiki-offline.git
    cd archwiki-offline
    ```

3. Make the script executable:

    ```bash
    chmod +x archwiki
    ```

### Using AUR Package (Recommended)
1. Install the `archwiki-offline` package from AUR:

    ```bash
    yay -S archwiki-offline
    ```

Using the AUR package is the recommended method as it takes care of dependencies and provides a smoother installation experience.

## Usage

```bash
./archwiki [FLAGS]
```

**Flags**:

- `-h`: Display help information.
- `-d`: Disown the process. (Does not keep the terminal hanging after opening the file in a browser)
- `-m MODE`: Select the display mode (`rofi`, `dmenu`, or `fzf`).
- `-o OPENER`: Specify the opening method for links (`xdg-open`, `firefox`, `chromium`, `w3m`, etc.). Default is `xdg-open`.

## Tips

### Example with fzf

For a seamless experience with `fzf`, consider creating a wrapper script that formats the page titles for better readability and uses `w3m` to display a preview of the selected page:

```bash
#!/bin/bash

# Custom script for using fzf with ArchWiki offline access
# Replaces spaces in the selected topic with underscores and opens the corresponding HTML file in w3m for preview

# Usage: ./fzf_archwiki.sh "Selected ArchWiki Topic"

# Replace spaces with underscores
selected_topic=$(echo "$1" | sed 's/ /_/g')

# Open the HTML file using w3m for preview
w3m /usr/share/doc/arch-wiki/html/en/$selected_topic.html
```

You can save this script as `fzf_archwiki.sh`, make it executable (`chmod +x fzf_archwiki.sh`), and use it along with your main script. Here's how you can use it:

```bash
archwiki-offline -m "fzf --preview './fzf_archwiki.sh {}'"
```

With this script, the selected ArchWiki topic will be passed to the `fzf_archwiki.sh` script, which will replace spaces with underscores and open the corresponding HTML file using `w3m` for a preview.

Remember to adjust file paths and names according to your actual setup if needed.
This will allow you to preview the selected topic in the terminal itself before opening it in your browser.

* *If you Don't Prefer Other script* you can add this to your .bashrc or .zshrc this will give you an alias to open archwiki in fzf with preview

alias is archwiki

```bash
command -v archwiki-offline &>/dev/null && {
	_temp_file="$(mktemp -q)"
	cat <<EOF >"$_temp_file"
#!/bin/bash
# Replace spaces with underscores
selected_topic=\$(echo "\$1" | sed 's/ /_/g')

# Open the HTML file using w3m for preview
w3m /usr/share/doc/arch-wiki/html/en/\$selected_topic.html
EOF
	chmod +x "$_temp_file"

	_cmd="xdg-open"
	check fzf && _cmd="fzf"
	check w3m && _cmd="fzf --preview=\"$_temp_file {}\""
	alias archwiki="archwiki-offline -m '$_cmd'"
}
```

### Dark Mode in Browser

If you prefer using a browser to preview the ArchWiki files instead of `w3m`, you can take advantage of the [Dark Reader](https://darkreader.org/) extension to enable dark mode for the ArchWiki pages. However, there's a catch: when the pages are fetched from the system in offline mode, Dark Reader might not automatically apply the dark theme. To ensure it works seamlessly, follow the instructions below:

#### For Chrome

1. Open a new tab and enter `chrome://extensions` in the address bar.
2. Locate "Dark Reader" in the extensions list and click on it.
3. Enable the option "Allow access to file URLs."

#### For Firefox

1. Type `about:config` in the Firefox address bar and press Enter.
2. In the search bar, enter `security.fileuri.strict_origin_policy`.
3. Double-click on the entry to set it to `false`.
4. Restart Firefox to apply the changes.

These adjustments will ensure that Dark Reader can successfully apply dark mode to the offline ArchWiki pages. If you encounter any issues or have further questions, feel free to create an issue on the [GitHub repository](https://github.com/niksingh710/archwiki-offline). You can also refer to [this issue on Dark Reader](https://github.com/darkreader/darkreader/issues/475) for more information.

This enhancement will provide users with an option to enjoy the ArchWiki pages in dark mode when using a browser for previewing.
## Contribution

Feel free to contribute to this script by opening issues or submitting pull requests on the [GitHub repository](https://github.com/niksingh710/archwiki-offline). Your contributions will be highly appreciated.


## Acknowledgements

This project is made possible by the amazing [`arch-wiki-docs`](https://github.com/lahwaacz/arch-wiki-docs) project, which provides the backbone for offline ArchWiki access. A big thank you to the creators and maintainers of this tool for their dedication to the Arch Linux community.

Special thanks to [Lahwaacz](https://github.com/lahwaacz) for developing and maintaining `arch-wiki-docs`. Your work has significantly enriched the Arch Linux experience for users like me.

Without the invaluable efforts put into `arch-wiki-docs`, this project wouldn't have been possible. Thank you!

---

**Note:** This project is not affiliated with or endorsed by `arch-wiki-docs`. It simply builds upon the functionality provided by that project to offer a more streamlined offline ArchWiki access experience.

## License

This project is licensed under the [MIT License](LICENSE).

